<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard do Aventureiro</title>
    <link rel="stylesheet" href="./css/dashboard.css">
</head>
<body>
    <div class="container-dashboard">
        
        <div class="barra-lateral">
            <div class="perfil-usuario">
                <p id="username" class="nome-usuario">Aventureiro Padrão</p>
            </div>
            
            <nav class="navegacao-principal">
                <a href="" class="item-navegacao" id="link-configuracoes"> Configurações</a>
            </nav>
            
            <button id="botao_sair" class="botao-sair">
                Sair da Sessão
            </button>
        </div>

        <main class="conteudo-principal">
            <header class="cabecalho">
                <h1 id="boas_vindas">Bem-vindo(a), Aventureiro!</h1>
            </header>
            
            <section class="area-conteudo">
                <h2>Métricas do Servidor</h2>
                
                <div class="container-kpis">
                    
                    <div class="card-kpi">
                        <p class="kpi-titulo">Aventureiros Participantes</p>
                        <h3 class="kpi-numero">42</h3>
                    </div>
                    
                    <div class="card-kpi">
                        <p class="kpi-titulo">Média de Acertos (%)</p>
                        <h3 class="kpi-numero">87.5%</h3>
                    </div>


                    <div class="grafico">
                        <canvas id="myChart"></canvas>
                    </div>
                    
                </div>
            </section>
        </main>
    <script> 
    b_email.innerHTML = sessionStorage.EMAIL_USUARIO;

function exibirGrafico(){
    var listaPercentual = [];
    var email = sessionStorage.getItem("EMAIL_USUARIO");
    console.log("EMAIL_USUARIO")



       fetch(`quizz/${id}`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
            })
        }).then(function (resposta) {
            resposta.json()
            .then(function (conversao){
                for(let i = 0; i < conversao.length; i++){
                    listaPercentual[i] = conversao[i].percentual_acerto;
                }
            var ctx = document.getElementById('myChart');

              new Chart(ctx, {
             type: "line",
            data: {
            labels: percentual,
            datasets: [{
              label: "Percentual de acertos",
              data: valor,
              borderWidth: 1,
            }],

        options: {
          scales: {
            y: {
              beginAtZero: true,
            }
          }
        }
      });

    }).catch(function (erro) {
            console.log(`#ERRO: ${resposta}`);
        });

    }
    
    

 
    
    
    // src="dashboard.js" 
    
    
    </script>
</body>
</html>
